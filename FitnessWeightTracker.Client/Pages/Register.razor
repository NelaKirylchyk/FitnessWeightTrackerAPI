@page "/register"
@using FitnessWeightTracker.Client.Models
@using FitnessWeightTracker.Client.Services
@inject AuthService AuthService

<h3>Register</h3>

<EditForm Model="registerModel" OnValidSubmit="HandleRegister">
    <InputText @bind-Value="registerModel.Email" placeholder="Email" />
    <InputText @bind-Value="registerModel.Password" type="password" placeholder="Password" />
    <button type="submit">Register</button>
</EditForm>
@if (!string.IsNullOrEmpty(message))
{
    <p>@message</p>
}

@code {
    RegisterModel registerModel = new();
    string message;

    async Task HandleRegister()
    {
        var result = await AuthService.RegisterAsync(registerModel);
        message = result ? "Registration successful!" : "Registration failed.";
    }
}
